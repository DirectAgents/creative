/*
 jQuery UI Spinner 1.20

 Copyright (c) 2009-2010 Brant Burnett
 Dual licensed under the MIT or GPL Version 2 licenses.
*/(function(e){var t="ui-state-active",n=e.ui.keyCode,r=n.UP,i=n.DOWN,s=n.RIGHT,o=n.LEFT,u=n.PAGE_UP,a=n.PAGE_DOWN,f=n.HOME,l=n.END,c=e.browser.msie,h=e.browser.mozilla?"DOMMouseScroll":"mousewheel",p=[r,i,s,o,u,a,f,l,n.BACKSPACE,n.DELETE,n.TAB],d;e.widget("ui.spinner",{options:{min:null,max:null,allowNull:!1,group:"",point:".",prefix:"",suffix:"",places:null,defaultStep:1,largeStep:10,mouseWheel:!0,increment:"slow",className:null,showOn:"always",width:16,upIconClass:"ui-icon-triangle-1-n",downIconClass:"ui-icon-triangle-1-s",format:function(e,t){var n=/(\d+)(\d{3})/,r=(isNaN(e)?0:Math.abs(e)).toFixed(t)+"";for(r=r.replace(".",this.point);n.test(r)&&this.group;r=r.replace(n,"$1"+this.group+"$2"));return(e<0?"-":"")+this.prefix+r+this.suffix},parse:function(e){this.group=="."&&(e=e.replace(".",""));this.point!="."&&(e=e.replace(this.point,"."));return parseFloat(e.replace(/[^0-9\-\.]/g,""))}},_create:function(){var e=this.element,t=e.attr("type");if(!e.is("input")||t!="text"&&t!="number")console.error("Invalid target for ui.spinner");else{this._procOptions(!0);this._createButtons(e);e.is(":enabled")||this.disable()}},_createButtons:function(h){function m(e){return e=="auto"?0:parseInt(e)}function g(e){for(var t=0;t<p.length;t++)if(p[t]==e)return!0;return!1}function y(e,t){if(V)return!1;var n=String.fromCharCode(t||e),r=x.options;return n>="0"&&n<="9"||n=="-"?!1:x.places>0&&n==r.point||n==r.group?!1:!0}function b(e){function t(){U=0;e()}if(U){if(e===z)return;clearTimeout(U)}z=e;U=setTimeout(t,100)}function w(){if(!T.disabled){var n=x.element[0],r=this===I?1:-1;n.focus();n.select();e(this).addClass(t);$=!0;x._startSpin(r)}return!1}function S(){if($){e(this).removeClass(t);x._stopSpin();$=!1}return!1}var x=this,T=x.options,k=T.className,A=T.width,M=T.showOn,_=e.support.boxModel,P=h.outerHeight(),H=x.oMargin=m(h.css("margin-right")),B=x.wrapper=h.css({width:(x.oWidth=_?h.width():h.outerWidth())-A,marginRight:H+A,textAlign:"right"}).after('<span class="ui-spinner ui-widget"></span>').next(),F=x.btnContainer=e('<div class="ui-spinner-buttons"><div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr"><span class="ui-icon '+T.upIconClass+'">&nbsp;</span></div><div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br"><span class="ui-icon '+T.downIconClass+'">&nbsp;</span></div></div>'),I,q,R,U,z,W,X,V,$,Q=h[0].dir=="rtl";k&&B.addClass(k);B.append(F.css({height:P,left:-A-H,top:h.offset().top-B.offset().top+"px"}));R=x.buttons=F.find(".ui-spinner-button");R.css({width:A-(_?R.outerWidth()-R.width():0),height:P/2-(_?R.outerHeight()-R.height():0)});I=R[0];q=R[1];k=R.find(".ui-icon");k.css({marginLeft:(R.innerWidth()-k.width())/2,marginTop:(R.innerHeight()-k.height())/2});F.width(R.outerWidth());M!="always"&&F.css("opacity",0);(M=="hover"||M=="both")&&R.add(h).bind("mouseenter.uispinner",function(){b(function(){W=!0;(!x.focused||M=="hover")&&x.showButtons()})}).bind("mouseleave.uispinner",function(){b(function(){W=!1;(!x.focused||M=="hover")&&x.hideButtons()})});R.hover(function(){x.buttons.removeClass("ui-state-hover");T.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).mousedown(w).mouseup(S).mouseout(S);c&&R.dblclick(function(){if(!T.disabled){x._change();x._doSpin((this===I?1:-1)*T.step)}return!1}).bind("selectstart",function(){return!1});h.bind("keydown.uispinner",function(n){var c,h,p=n.keyCode;if(n.ctrl||n.alt)return!0;g(p)&&(V=!0);if(X)return!1;switch(p){case r:case u:c=1;h=p==u;break;case i:case a:c=-1;h=p==a;break;case s:case o:c=p==s^Q?1:-1;break;case f:n=x.options.min;n!=null&&x._setValue(n);return!1;case l:n=x.options.max;n!=null&&x._setValue(n);return!1}if(c){if(!X&&!T.disabled){keyDir=c;e(c>0?I:q).addClass(t);X=!0;x._startSpin(c,h)}return!1}}).bind("keyup.uispinner",function(e){if(e.ctrl||e.alt)return!0;g(n)&&(V=!1);switch(e.keyCode){case r:case s:case u:case i:case o:case a:R.removeClass(t);x._stopSpin();return X=!1}}).bind("keypress.uispinner",function(e){if(y(e.keyCode,e.charCode))return!1}).bind("change.uispinner",function(){x._change()}).bind("focus.uispinner",function(){function e(){x.element.select()}c?e():setTimeout(e,0);x.focused=!0;d=x;!W&&(M=="focus"||M=="both")&&x.showButtons()}).bind("blur.uispinner",function(){x.focused=!1;!W&&(M=="focus"||M=="both")&&x.hideButtons()})},_procOptions:function(e){var t=this.element,n=this.options,r=n.min,i=n.max,s=n.step,o=n.places,u=-1,a;n.increment=="slow"?n.increment=[{count:1,mult:1,delay:250},{count:3,mult:1,delay:100},{count:0,mult:1,delay:50}]:n.increment=="fast"&&(n.increment=[{count:1,mult:1,delay:250},{count:19,mult:1,delay:100},{count:80,mult:1,delay:20},{count:100,mult:10,delay:20},{count:0,mult:100,delay:20}]);r==null&&(a=t.attr("min"))!=null&&(r=parseFloat(a));i==null&&(a=t.attr("max"))!=null&&(i=parseFloat(a));if(!s&&(a=t.attr("step"))!=null&&a!="any"){s=parseFloat(a);n.largeStep*=s}n.step=s=s||n.defaultStep;o==null&&(a=s+"").indexOf(".")!=-1&&(o=a.length-a.indexOf(".")-1);this.places=o;if(i!=null&&r!=null){r>i&&(r=i);u=Math.max(Math.max(u,n.format(i,o,t).length),n.format(r,o,t).length)}e&&(this.inputMaxLength=t[0].maxLength);a=this.inputMaxLength;if(a>0){u=u>0?Math.min(a,u):a;a=Math.pow(10,u)-1;if(i==null||i>a)i=a;a=-(a+1)/10+1;if(r==null||r<a)r=a}u>0&&t.attr("maxlength",u);n.min=r;n.max=i;this._change();t.unbind(h+".uispinner");n.mouseWheel&&t.bind(h+".uispinner",this._mouseWheel)},_mouseWheel:function(t){var n=e.data(this,"spinner");if(!n.options.disabled&&n.focused&&d===n){n._change();n._doSpin(((t.wheelDelta||-t.detail)>0?1:-1)*n.options.step);return!1}},_setTimer:function(e,t,n){function r(){i._spin(t,n)}var i=this;i._stopSpin();i.timer=setInterval(r,e)},_stopSpin:function(){if(this.timer){clearInterval(this.timer);this.timer=0}},_startSpin:function(e,t){var n=this.options.increment;this._change();this._doSpin(e*(t?this.options.largeStep:this.options.step));if(n&&n.length>0){this.incCounter=this.counter=0;this._setTimer(n[0].delay,e,t)}},_spin:function(e,t){var n=this.options.increment,r=n[this.incCounter];this._doSpin(e*r.mult*(t?this.options.largeStep:this.options.step));this.counter++;if(this.counter>r.count&&this.incCounter<n.length-1){this.counter=0;r=n[++this.incCounter];this._setTimer(r.delay,e,t)}},_doSpin:function(e){var t=this.curvalue;t==null&&(t=(e>0?this.options.min:this.options.max)||0);this._setValue(t+e)},_parseValue:function(){var e=this.element.val();return e?this.options.parse(e,this.element):null},_validate:function(e){var t=this.options,n=t.min,r=t.max;e==null&&!t.allowNull&&(e=this.curvalue!=null?this.curvalue:n||r||0);return r!=null&&e>r?r:n!=null&&e<n?n:e},_change:function(){var e=this._parseValue();if(!this.selfChange){isNaN(e)&&(e=this.curvalue);this._setValue(e,!0)}},_setOption:function(t,n){e.Widget.prototype._setOption.call(this,t,n);this._procOptions()},increment:function(){this._doSpin(this.options.step)},decrement:function(){this._doSpin(-this.options.step)},showButtons:function(e){var t=this.btnContainer.stop();e?t.css("opacity",1):t.fadeTo("fast",1)},hideButtons:function(e){var t=this.btnContainer.stop();e?t.css("opacity",0):t.fadeTo("fast",0);this.buttons.removeClass("ui-state-hover")},_setValue:function(e,t){this.curvalue=e=this._validate(e);this.element.val(e!=null?this.options.format(e,this.places,this.element):"");if(!t){this.selfChange=!0;this.element.change();this.selfChange=!1}},value:function(e){if(arguments.length){this._setValue(e);return this.element}return this.curvalue},enable:function(){this.buttons.removeClass("ui-state-disabled");this.element[0].disabled=!1;e.Widget.prototype.enable.call(this)},disable:function(){this.buttons.addClass("ui-state-disabled").removeClass("ui-state-hover");this.element[0].disabled=!0;e.Widget.prototype.disable.call(this)},destroy:function(){this.wrapper.remove();this.element.unbind(".uispinner").css({width:this.oWidth,marginRight:this.oMargin});e.Widget.prototype.destroy.call(this)}})})(jQuery);